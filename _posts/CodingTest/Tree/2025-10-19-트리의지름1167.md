---
title: 백준 1167번 / 트리의지름
date: 2025-10-19 06:04:00 +0900
categories: [ CodingTest ]  
tags:  [ C, C++, tree ]
---

백준 1167번 문제인 트리의지름이다.

# 문제   
---------------------------------------

![Desktop View](/assets/img/트리의지름1167.png){: w="700" h="400" }

---------------------------------------

# 풀이

```c++
#include <iostream>
#include <vector>

using namespace std;

struct Node
{
	int node;
	int length;

	Node(int mNode, int mLength) : node(mNode), length(mLength)
	{}
};

int maxLength = 0;
int node = 0;
void DFS(vector<vector<Node>>& tree, vector<int>& visited, int cur, int length)
{
	if (visited[cur] == true)
		return;

	visited[cur] = true;

	if (length > maxLength)
	{
		maxLength = length;
		node = cur;
	}

	for (int i = 0; i < tree[cur].size(); i++)
	{
		if (visited[tree[cur][i].node] == true)
			continue;

		DFS(tree, visited, tree[cur][i].node, length + tree[cur][i].length);
	}
}

int main()
{
	ios_base::sync_with_stdio(false);
	cin.tie(NULL);
	cout.tie(NULL);

	int v;
	cin >> v;

	vector<vector<Node>> tree(v + 1);
	for (int i = 0; i < v; i++)
	{
		int node;
		cin >> node;

		int input;
		vector<int> inputs;
		while (cin >> input)
		{
			if (input == -1)
				break;

			inputs.push_back(input);
		}

		for (int j = 0; j < inputs.size(); j += 2)
			tree[node].push_back(Node(inputs[j], inputs[j + 1]));
	}

	vector<int> visited(tree.size(), false);

	DFS(tree, visited, 1, 0);
	fill(visited.begin(), visited.end(), false);

	maxLength = 0;
	DFS(tree, visited, node, 0);

	cout << maxLength << '\n';
	return 0;
}
```
---------------------------------------

# 후기

트리의 지름 알고리즘을 사용하는 문제로 일단 지금 당장은 증명이 어찌되었든 임의 정점 x에서 가장 먼 정점 y를 얻어주고

y에서 가장 먼 정점 z를 찾고 y -> z의 거리가 트리의 지름이라는 점을 코드로 써 구현해 풀었다.

또 문제를 풀며 처음으로 메모리초과에 대해 생각해봤는데 처음에는 tree의 크기를 100000 x 100000인 100억이였다.

해당 문제는 DFS 즉 "완전탐색"으로 모든 배열에 접근을 하는데 접근해야 하는 배열의 크기가 100억이였고 그 타입이 int로

100억 x 4byte = 대략 37.25GB였다...ㄷㄷ 그래서 인접행렬 방식에서 인접리스트 방식으로 만들어 엄청나게 작게 만들었는데

그 수치는 간선이 양방향이라 2v에 Node는 4byte 변수가 2개로 8byte이므로 2v x 8byte로 16byte이고 v의 최대치는 10만이니

16byte x 10만으로 대략 1.6MB가 되었고 25000배 이상을 감소시킨 것이다~
